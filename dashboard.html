<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HostelLife â€“ Dashboard</title>
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>

  <!-- Role Banner + Logout -->
   <div class="top-bar">
  <p id="roleBanner"></p>
  <button id="logoutBtn" class="logout-btn">Logout</button>
</div>

  <!-- STUDENT SECTION -->
  <div class="student-only">

    <div class="app">
      <h1>ğŸ½ï¸ Todayâ€™s Mess Menu</h1>
      <hr />

      <h2 style="margin-top:20px;">ğŸ“… Weekly Menu</h2>
      <div class="weekly-menu" id="weeklyMenu"></div>

      <div class="menu-card highlight">
        <h2 id="day"></h2>
        <p><strong>Breakfast:</strong> <span id="breakfast"></span></p>
        <p><strong>Lunch:</strong> <span id="lunch"></span></p>
        <p><strong>Dinner:</strong> <span id="dinner"></span></p>
      </div>
    </div>

    <!-- Rate Food -->
    <div class="card">
      <h2>â­ Rate Todayâ€™s Food</h2>

      <div class="stars">
        <span data-value="1">â˜…</span>
        <span data-value="2">â˜…</span>
        <span data-value="3">â˜…</span>
        <span data-value="4">â˜…</span>
        <span data-value="5">â˜…</span>
      </div>

      <textarea id="reviewText" placeholder="Write your review (optional)..."></textarea>
      <button id="submitReview">Submit Review</button>
      <p id="reviewMsg"></p>
    </div>

    <!-- Student Announcements -->
    <div class="card">
      <h2>ğŸ“¢ Announcements</h2>
      <div id="announcementList">
        <p>No announcements yet.</p>
      </div>
    </div>

  </div>

  <!-- WARDEN SECTION -->
  <div class="warden-only">
  <div class="card">
    <h2>ğŸ“¢ Post Announcement</h2>
    <textarea id="announcementText" placeholder="Write announcement..."></textarea>
    <button id="postAnnouncement">Post</button>
    <p id="announceMsg"></p>

    <hr />

    <h3>ğŸ“„ All Announcements</h3>
    <div id="wardenAnnouncements"></div>
  </div>
</div>


  <!-- Main JS -->
  <script src="js/menu.js"></script>

  <!-- Today Menu -->
  <script>
    const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
    const today = days[new Date().getDay()];
    const todayMenu = weeklyMenu[today];

    document.getElementById("day").innerText = today;
    document.getElementById("breakfast").innerText = todayMenu.breakfast;
    document.getElementById("lunch").innerText = todayMenu.lunch;
    document.getElementById("dinner").innerText = todayMenu.dinner;

    const weeklyMenuContainer = document.getElementById("weeklyMenu");

    for (const day in weeklyMenu) {
      const menu = weeklyMenu[day];
      const div = document.createElement("div");
      div.className = "menu-day";
      div.innerHTML = `
        <h3>${day}</h3>
        <p><strong>Breakfast:</strong> ${menu.breakfast}</p>
        <p><strong>Lunch:</strong> ${menu.lunch}</p>
        <p><strong>Dinner:</strong> ${menu.dinner}</p>
      `;
      weeklyMenuContainer.appendChild(div);
    }
  </script>

  <!-- ROLE + LOGOUT (ONLY ONCE) -->
  <script>
    const role = localStorage.getItem("userRole");
    const banner = document.getElementById("roleBanner");
    const logoutBtn = document.getElementById("logoutBtn");

    if (!role) {
      window.location.href = "index.html";
    }

    if (role === "student") {
      banner.textContent = "ğŸ‘©â€ğŸ“ Student Dashboard";
      document.querySelectorAll(".warden-only")
        .forEach(el => el.style.display = "none");
    }

    if (role === "warden") {
      banner.textContent = "ğŸ§‘â€ğŸ’¼ Warden Dashboard";
      document.querySelectorAll(".student-only")
        .forEach(el => el.style.display = "none");
    }

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("userRole");
      window.location.href = "index.html";
    });
  </script>

</body>
</html>
